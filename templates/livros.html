{% extends "layout.html" %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_livros.css') }}">
{% endblock %}

{% block title %}Livros{% endblock %}

{% block content %}
    <body>
        <h1>Livros</h1>
        <p>Aqui você visualizar informações, editar, cadastrar e deletar seus livros.</p>
        
        <button class="btn-cadastro" onclick="openCadastroModal()">Cadastrar Novo Livro</button>
        
        <!-- Modal para cadastro de livro -->
        <div id="cadastroModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeCadastroModal()">&times;</span>
                <h1>Cadastro de Livro</h1>
                <form id="cadastroForm" action="/livros" method="post">
                    <label for="titulo">Título do livro:</label>
                    <input type="text" id="titulo" name="titulo" required><br><br>
                    
                    <label for="isbn">ISBN:</label>
                    <input type="text" id="isbn" name="isbn" required><br><br>
                    
                    <label for="autor">Autor:</label>
                    <input type="text" id="autor" name="autor" required><br><br>
                    
                    <label for="genero">Gênero:</label>
                    <select id="genero" name="genero" required>
                        <option value="">Selecione</option>
                        <option value="Ficção">Ficção</option>
                        <option value="Não-Ficção">Não-Ficção</option>
                        <option value="Romance">Romance</option>
                        <option value="Mistério">Mistério</option>
                        <option value="Biografia">Biografia</option>
                        <!-- Adicione mais opções conforme necessário -->
                    </select><br><br>
                    
                    <label for="descricao">Descrição:</label>
                    <textarea id="descricao" name="descricao" required></textarea><br><br>
                    
                    <input type="hidden" id="id_livro" name="id_livro">
                    <input type="submit" value="Cadastrar Livro">
                </form>
            </div>
        </div>

        <!-- Modal para editar livro -->
        <div id="editModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeEditModal()">&times;</span>
                <h1>Editar Livro</h1>
                <form id="editForm" action="/livros" method="post">
                    <label for="edit-titulo">Título do livro:</label>
                    <input type="text" id="edit-titulo" name="titulo" required><br><br>
                    
                    <label for="edit-isbn">ISBN:</label>
                    <input type="text" id="edit-isbn" name="isbn" required><br><br>
                    
                    <label for="edit-autor">Autor:</label>
                    <input type="text" id="edit-autor" name="autor" required><br><br>
                    
                    <label for="edit-genero">Gênero:</label>
                    <select id="edit-genero" name="genero" required>
                        <option value="Ficção">Ficção</option>
                        <option value="Não-Ficção">Não-Ficção</option>
                        <option value="Romance">Romance</option>
                        <option value="Mistério">Mistério</option>
                        <option value="Biografia">Biografia</option>
                        <!-- Adicione mais opções conforme necessário -->
                    </select><br><br>
                    
                    <label for="edit-descricao">Descrição:</label>
                    <textarea id="edit-descricao" name="descricao" required></textarea><br><br>
                    
                    <input type="hidden" id="edit-id_livro" name="id_livro">
                    <input type="submit" value="Atualizar">
                    <button type="button" id="deleteButton" style="display:none" onclick="deleteLivro()">Apagar Livro</button>
                </form>
            </div>
        </div>
        
        <h2>Lista de Livros</h2>
        <table>
            <tr>
                <th>Título</th>
                <th>ISBN</th>
                <th>Autor</th>
                <th>Gênero</th>
                <th>Descrição</th>
                <th>Ações</th>
            </tr>
            {% for livro in livros %}
            <tr>
                <td>{{ livro[1] }}</td>
                <td>{{ livro[2] }}</td>
                <td>{{ livro[3] }}</td>
                <td>{{ livro[4] }}</td>
                <td>{{ livro[5] }}</td>
                <td>
                    <a href="javascript:void(0)" onclick="openEditModal('{{ livro[0] }}', '{{ livro[1] }}', '{{ livro[2] }}', '{{ livro[3] }}', '{{ livro[4] }}', '{{ livro[5] }}')">Editar</a>
                </td>
            </tr>
            {% endfor %}
        </table>

        <br><br><br>
        <a href="/home">Voltar para a home</a>
        <br><br><br>
        <a href="/logout">Logout</a>
        
        <script src="../static/JS/script_livros.js"></script>
    </body>
{% endblock %}